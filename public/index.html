<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TechShop</title>

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="apple-touch-icon" sizes="180x180" href="./img/logo/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./img/logo/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./img/logo/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <!-- Custom styles -->
    <link rel="stylesheet" href="/styles.css?v=2">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Preload slider images for faster loading -->
    <link rel="preload" as="image" href="/img/slider/slider1.jpg">
    <link rel="preload" as="image" href="/img/slider/slider2.png">
    <link rel="preload" as="image" href="/img/slider/slider3.png">

    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        /* Animation */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-fade-in {
            animation: fadeIn 0.3s ease-out;
        }

        /* Product card hover */
        .product-card {
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .product-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        /* ƒê·∫£m b·∫£o products grid items c√≥ c√πng chi·ªÅu cao */
        .products-grid {
            align-items: stretch;
        }
        
        .products-grid > * {
            height: 100%;
        }
        /* Bootstrap compatibility */
        .breadcrumb {
            margin-bottom: 0;
        }
        .breadcrumb-item a {
            color: #0d6efd;
            text-decoration: none;
        }
        .breadcrumb-item.active {
            color: #6c757d;
        }
        .card {
            border: 1px solid rgba(0,0,0,.125);
            border-radius: 0.375rem;
        }
        .list-group-item {
            border: 1px solid rgba(0,0,0,.125);
        }
        
        /* Slider Styles */
        .slide {
            transition: opacity 0.5s ease-in-out;
        }
        .slide.opacity-100 {
            z-index: 1;
        }
        .slide.opacity-0 {
            z-index: 0;
        }
        .slider-dot.active-dot {
            width: 12px;
            height: 12px;
        }
        
        /* Navigation Dropdown Styles */
        .nav-dropdown {
            position: relative;
        }
        .nav-dropdown:hover .nav-dropdown-menu {
            display: block;
            opacity: 1;
            visibility: visible;
        }
        .nav-dropdown-menu {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            margin-top: 0.5rem;
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            min-width: 200px;
            z-index: 60;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.2s ease-in-out, visibility 0.2s ease-in-out;
        }
        .nav-dropdown-menu a {
            display: block;
            padding: 0.75rem 1rem;
            color: #374151;
            text-decoration: none;
            transition: background-color 0.2s;
        }
        .nav-dropdown-menu a:hover {
            background-color: #f3f4f6;
            color: #dc2626;
        }
        
        /* Notification Dropdown Styles */
        #notificationDropdown {
            max-height: 500px;
        }
        
        #notificationList {
            max-height: 400px;
            overflow-y: auto;
        }
        
        #notificationList::-webkit-scrollbar {
            width: 6px;
        }
        
        #notificationList::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        
        #notificationList::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 3px;
        }
        
        #notificationList::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
        
        .notification-item {
            transition: background-color 0.2s;
        }
        
        #notificationBadge {
            font-size: 11px;
            font-weight: 600;
        }
    </style>
</head>

<body class="bg-gray-50">
    <!-- Top Bar (Red Banner) - Fixed -->
    <div class="bg-red-600 text-white py-2 text-xs fixed top-0 left-0 right-0 z-[60] hidden md:block">
        <div class="container mx-auto px-4">
            <div class="flex items-center justify-between flex-wrap gap-2">
                <div class="flex items-center gap-4 flex-wrap">
                    <span>‚úì ƒê√£ bao g·ªìm VAT ƒë·∫ßy ƒë·ªß</span>
                    <span>üöö Giao nhanh - Mi·ªÖn ph√≠ cho ƒë∆°n 300k</span>
                    <span>üîÑ Thu c≈© gi√° ngon ‚Äì L√™n ƒë·ªùi ti·∫øt ki·ªám</span>
                    <span>‚úì S·∫£n ph·∫©m Ch√≠nh h√£ng</span>
                </div>
                <div class="flex items-center gap-4">
                    <a href="/location.html" class="hover:underline">C·ª≠a h√†ng g·∫ßn b·∫°n</a>
                    <a href="/?page=orders" class="hover:underline">Tra c·ª©u ƒë∆°n h√†ng</a>
                    <span>üìû Hotline: <strong>0905 884 303</strong></span>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Header - Fixed below top bar -->
    <header class="bg-white shadow-md fixed left-0 right-0 z-50 md:top-[40px] top-0">
        <div class="container mx-auto px-4">
            <!-- Header Content -->
            <div class="flex items-center justify-between py-4 gap-4" style="margin-top: 30px;">
                <!-- Logo -->
                <div class="flex items-center">
                    <a href="#" onclick="navigateTo('home'); return false;" class="flex items-center gap-2">
                        <img src="/img/logo/logo.png" alt="TechStore" class="w-10 h-10 object-contain" />
                        <span class="text-2xl font-bold text-red-600 leading-none">TechStore</span>
                    </a>
                </div>

                <!-- Search Bar -->
                <div class="flex-1 max-w-2xl mx-4">
                    <div class="relative">
                        <input type="text" id="mainSearchInput" placeholder="B·∫°n mu·ªën mua g√¨ h√¥m nay?"
                            class="w-full px-4 py-2 pr-10 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-red-500 transition-all" 
                            autocomplete="off" />
                        <button id="mainSearchButton"
                            class="absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-red-600 cursor-pointer">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                            </svg>
                        </button>
                        <!-- Search Suggestions Dropdown -->
                        <div id="searchSuggestions" class="hidden absolute z-[100] w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-96 overflow-y-auto">
                            <div id="searchSuggestionsContent" class="py-2">
                                <!-- Suggestions will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Actions -->
                <div class="flex items-center gap-4">
                    <!-- Theme Toggle -->
                    <button id="themeToggle" 
                            class="theme-toggle" 
                            aria-label="Toggle theme"
                            title="Chuy·ªÉn ƒë·ªïi giao di·ªán">
                        <i class="fas fa-moon"></i>
                    </button>

                    <!-- Language Toggle -->
                    <select id="langToggle" 
                            class="lang-toggle"
                            title="Ch·ªçn ng√¥n ng·ªØ">
                        <option value="vi">üáªüá≥ VI</option>
                        <option value="en">üá¨üáß EN</option>
                    </select>

                    <!-- Cart -->
                    <a href="#" onclick="navigateTo('cart'); return false;"
                        class="relative flex items-center gap-2 text-gray-700 hover:text-red-600 transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z">
                            </path>
                        </svg>
                        <span class="hidden md:block font-medium">Gi·ªè h√†ng</span>
                        <span id="cartBadgeHeader"
                            class="absolute -top-2 -right-2 bg-red-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center hidden">0</span>
                    </a>

                    <!-- Notifications -->
                    <div id="navNotifications" class="relative hidden">
                        <button id="notificationBtn"
                            class="relative flex items-center gap-2 text-gray-700 hover:text-red-600 transition-colors">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9">
                                </path>
                            </svg>
                            <span class="hidden md:block font-medium">Th√¥ng b√°o</span>
                            <span id="notificationBadge"
                                class="absolute -top-2 -right-2 bg-red-600 text-white text-xs rounded-full min-w-[20px] h-5 flex items-center justify-center px-1.5 hidden">0</span>
                        </button>
                        <div id="notificationDropdown"
                            class="hidden absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-[60] max-h-[500px] overflow-hidden flex flex-col">
                            <div class="p-4 border-b border-gray-200 flex items-center justify-between">
                                <h3 class="font-bold text-gray-800">Th√¥ng b√°o</h3>
                                <button id="markAllReadBtn" class="text-sm text-red-600 hover:text-red-700">ƒê√°nh d·∫•u ƒë√£ ƒë·ªçc</button>
                            </div>
                            <div id="notificationList" class="overflow-y-auto flex-1">
                                <div class="p-4 text-center text-gray-500">Kh√¥ng c√≥ th√¥ng b√°o n√†o</div>
                            </div>
                        </div>
                    </div>

                    <!-- User Menu / Auth Buttons -->
                    <div id="navUser" class="hidden">
                        <div class="relative">
                            <button id="userMenuBtn"
                                class="flex items-center gap-2 text-gray-700 hover:text-red-600 transition-colors">
                                <img id="userAvatar" src="" alt="Avatar" class="w-8 h-8 rounded-full object-cover border-2 border-gray-200">
                                <span id="userName" class="hidden md:block font-medium"></span>
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </button>
                            <div id="userMenuDropdown"
                                class="hidden absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-[60]">
                                <a href="/profile.html" onclick="document.getElementById('userMenuDropdown').classList.add('hidden');"
                                    class="block px-4 py-2 text-gray-700 hover:bg-gray-100">
                                    <i class="fas fa-user mr-2"></i>H·ªì s∆°
                                </a>
                                <a href="#" onclick="document.getElementById('userMenuDropdown').classList.add('hidden'); navigateTo('orders'); return false;"
                                    class="block px-4 py-2 text-gray-700 hover:bg-gray-100">
                                    <i class="fas fa-shopping-bag mr-2"></i>ƒê∆°n h√†ng
                                </a>
                                <a href="/admin.html" id="adminMenuLink" class="hidden block px-4 py-2 text-gray-700 hover:bg-gray-100">
                                    <i class="fas fa-cog mr-2"></i>Qu·∫£n tr·ªã
                                </a>
                                <a href="#" id="logoutBtn" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">ƒêƒÉng
                                    xu·∫•t</a>
                            </div>
                        </div>
                    </div>
                    <div id="navAuth" class="flex items-center gap-2">
                        <a href="/login.html"
                            class="px-4 py-2 text-gray-700 hover:text-red-600 font-medium transition-colors">ƒêƒÉng
                            nh·∫≠p</a>
                        <a href="/register.html"
                            class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium transition-colors">ƒêƒÉng
                            k√Ω</a>
                    </div>
                </div>
            </div>

            <!-- Navigation Bar -->
            <div class="border-t border-gray-200 py-3">
                <nav class="flex items-center gap-6 flex-wrap">
                    <!-- Trang Ch·ªß -->
                    <a href="/"
                        class="nav-link text-gray-700 hover:text-red-600 font-medium transition-colors"
                        data-page="home">Trang Ch·ªß</a>
                    
                    <!-- ƒêi·ªán tho·∫°i, Tablet -->
                    <div class="relative nav-dropdown group">
                        <a href="/phone-tablet.html"
                            class="nav-link text-gray-700 hover:text-red-600 font-medium transition-colors flex items-center gap-1"
                            data-page="phone-tablet">
                            ƒêi·ªán tho·∫°i, Tablet
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </a>
                        <div class="nav-dropdown-menu">
                            <a href="/phone.html" class="nav-link" data-page="phone">ƒêi·ªán tho·∫°i</a>
                            <a href="/tablet.html" class="nav-link" data-page="tablet">Tablet</a>
                            <a href="/phone-accessories.html" class="nav-link" data-page="phone-accessories">Ph·ª• ki·ªán ƒëi·ªán tho·∫°i</a>
                        </div>
                    </div>
                    
                    <!-- Laptop -->
                    <a href="/laptop.html"
                        class="nav-link text-gray-700 hover:text-red-600 font-medium transition-colors"
                        data-page="laptop">Laptop</a>
                    
                    <!-- √Çm thanh, Mic thu √¢m -->
                    <a href="/audio.html"
                        class="nav-link text-gray-700 hover:text-red-600 font-medium transition-colors"
                        data-page="audio">√Çm thanh, Mic thu √¢m</a>
                    
                    <!-- ƒê·ªìng h·ªì, Camera -->
                    <a href="/watch-camera.html"
                        class="nav-link text-gray-700 hover:text-red-600 font-medium transition-colors"
                        data-page="watch-camera">ƒê·ªìng h·ªì, Camera</a>
                    
                    <!-- Ph·ª• ki·ªán -->
                    <a href="/accessories.html"
                        class="nav-link text-gray-700 hover:text-red-600 font-medium transition-colors"
                        data-page="accessories">Ph·ª• ki·ªán</a>
                    
                    <!-- PC, M√†n h√¨nh, M√°y in -->
                    <div class="relative nav-dropdown group">
                        <a href="/pc-monitor-printer.html"
                            class="nav-link text-gray-700 hover:text-red-600 font-medium transition-colors flex items-center gap-1"
                            data-page="pc-monitor-printer">
                            PC, M√†n h√¨nh, M√°y in
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </a>
                        <div class="nav-dropdown-menu">
                            <a href="/pc.html" class="nav-link" data-page="pc">PC (M√°y t√≠nh ƒë·ªÉ b√†n)</a>
                            <a href="/monitor.html" class="nav-link" data-page="monitor">M√†n h√¨nh</a>
                            <a href="/printer.html" class="nav-link" data-page="printer">M√°y in</a>
                            <a href="/pc-parts.html" class="nav-link" data-page="pc-parts">Linh ki·ªán PC</a>
                        </div>
                    </div>
                    
                    <!-- FAQ -->
                    <a href="/faq.html"
                        class="nav-link text-gray-700 hover:text-red-600 font-medium transition-colors"
                        data-page="faq">FAQ</a>
                    
                    <!-- V·ªÅ ch√∫ng t√¥i -->
                    <a href="/about.html"
                        class="nav-link text-gray-700 hover:text-red-600 font-medium transition-colors"
                        data-page="about">V·ªÅ ch√∫ng t√¥i</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Content - Add padding-top to account for fixed header -->
    <main class="main-content pt-24 md:pt-40" id="mainContent" style="padding-top: 120px;">
        <style>
            @media (min-width: 768px) {
                main.main-content {
                    padding-top: 160px !important;
                }
            }
            @media (max-width: 767px) {
                main.main-content {
                    padding-top: 120px !important;
                }
            }
        </style>
        <!-- Home Page -->
        <section class="page" id="pageHome" data-page="home">
            <!-- Hero Slider -->
            <div class="relative mb-8 overflow-hidden" style="height: 500px;">
                <div class="slider-container relative w-full h-full">
                    <!-- Slide 1 -->
                    <div class="slide absolute inset-0 w-full h-full opacity-100 transition-opacity duration-500 ease-in-out" data-slide="0">
                        <img src="./img/slider/slider1.jpg" alt="Slide 1" class="w-full h-full object-cover" loading="eager" onerror="this.onerror=null; this.src='data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\' width=\'1200\' height=\'500\'><rect width=\'1200\' height=\'500\' fill=\'%23f3f4f6\'/><text x=\'50%25\' y=\'50%25\' dominant-baseline=\'middle\' text-anchor=\'middle\' fill=\'%239ca3af\' font-size=\'24\'>Slide 1</text></svg>'">
                        <div class="absolute inset-0 flex items-center justify-center z-10">
                            <div class="text-center text-white px-4">
                                <h2 class="text-4xl md:text-5xl font-bold mb-4" style="text-shadow: 2px 2px 8px rgba(0,0,0,0.8), 0 0 10px rgba(0,0,0,0.5);">Ch√†o m·ª´ng ƒë·∫øn TechStore</h2>
                                <p class="text-xl md:text-2xl mb-6" style="text-shadow: 2px 2px 8px rgba(0,0,0,0.8), 0 0 10px rgba(0,0,0,0.5);">N∆°i mua s·∫Øm tr·ª±c tuy·∫øn uy t√≠n, ch·∫•t l∆∞·ª£ng</p>
                                <button onclick="navigateTo('products')"
                                    class="bg-white text-red-600 px-8 py-3 rounded-lg font-bold hover:bg-gray-100 transition-colors shadow-lg">
                                    Kh√°m ph√° s·∫£n ph·∫©m
                                </button>
                            </div>
                        </div>
                    </div>
                    <!-- Slide 2 -->
                    <div class="slide absolute inset-0 w-full h-full opacity-0 transition-opacity duration-500 ease-in-out" data-slide="1">
                        <img src="/img/slider/slider2.png" alt="Slide 2" class="w-full h-full object-cover" loading="eager" onerror="this.onerror=null; this.src='data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\' width=\'1200\' height=\'500\'><rect width=\'1200\' height=\'500\' fill=\'%23f3f4f6\'/><text x=\'50%25\' y=\'50%25\' dominant-baseline=\'middle\' text-anchor=\'middle\' fill=\'%239ca3af\' font-size=\'24\'>Slide 2</text></svg>'">
                        <div class="absolute inset-0 flex items-center justify-center z-10">
                            <div class="text-center text-white px-4">
                                <h2 class="text-4xl md:text-5xl font-bold mb-4" style="text-shadow: 2px 2px 8px rgba(0,0,0,0.8), 0 0 10px rgba(0,0,0,0.5);">S·∫£n ph·∫©m c√¥ng ngh·ªá h√†ng ƒë·∫ßu</h2>
                                <p class="text-xl md:text-2xl mb-6" style="text-shadow: 2px 2px 8px rgba(0,0,0,0.8), 0 0 10px rgba(0,0,0,0.5);">ƒêa d·∫°ng s·∫£n ph·∫©m, gi√° c·∫£ h·ª£p l√Ω</p>
                                <button onclick="navigateTo('products')"
                                    class="bg-white text-red-600 px-8 py-3 rounded-lg font-bold hover:bg-gray-100 transition-colors shadow-lg">
                                    Xem ngay
                                </button>
                            </div>
                        </div>
                    </div>
                    <!-- Slide 3 -->
                    <div class="slide absolute inset-0 w-full h-full opacity-0 transition-opacity duration-500 ease-in-out" data-slide="2">
                        <img src="/img/slider/slider3.png" alt="Slide 3" class="w-full h-full object-cover" loading="eager" onerror="this.onerror=null; this.src='data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\' width=\'1200\' height=\'500\'><rect width=\'1200\' height=\'500\' fill=\'%23f3f4f6\'/><text x=\'50%25\' y=\'50%25\' dominant-baseline=\'middle\' text-anchor=\'middle\' fill=\'%239ca3af\' font-size=\'24\'>Slide 3</text></svg>'">
                        <div class="absolute inset-0 flex items-center justify-center z-10">
                            <div class="text-center text-white px-4">
                                <h2 class="text-4xl md:text-5xl font-bold mb-4" style="text-shadow: 2px 2px 8px rgba(0,0,0,0.8), 0 0 10px rgba(0,0,0,0.5);">∆Øu ƒë√£i ƒë·∫∑c bi·ªát</h2>
                                <p class="text-xl md:text-2xl mb-6" style="text-shadow: 2px 2px 8px rgba(0,0,0,0.8), 0 0 10px rgba(0,0,0,0.5);">Gi·∫£m gi√° l√™n ƒë·∫øn 50% cho kh√°ch h√†ng m·ªõi</p>
                                <button onclick="navigateTo('products')"
                                    class="bg-white text-red-600 px-8 py-3 rounded-lg font-bold hover:bg-gray-100 transition-colors shadow-lg">
                                    Mua ngay
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Navigation Arrows -->
                <button class="slider-prev absolute left-4 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-80 hover:bg-opacity-100 text-gray-800 p-3 rounded-full transition-all z-10">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                </button>
                <button class="slider-next absolute right-4 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-80 hover:bg-opacity-100 text-gray-800 p-3 rounded-full transition-all z-10">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                </button>
                
                <!-- Dot Indicators -->
                <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-2 z-10">
                    <button class="slider-dot w-3 h-3 rounded-full bg-white bg-opacity-50 hover:bg-opacity-100 transition-all active-dot" data-dot="0"></button>
                    <button class="slider-dot w-3 h-3 rounded-full bg-white bg-opacity-50 hover:bg-opacity-100 transition-all" data-dot="1"></button>
                    <button class="slider-dot w-3 h-3 rounded-full bg-white bg-opacity-50 hover:bg-opacity-100 transition-all" data-dot="2"></button>
                </div>
            </div>

            <div class="container mx-auto px-4">
                <!-- Categories Quick View -->
                <div class="mb-12">
                    <h3 class="text-2xl font-bold text-gray-800 mb-6">Danh m·ª•c s·∫£n ph·∫©m</h3>
                    <div class="categories-scroll-container overflow-x-auto pb-4 -mx-4 px-4"
                        id="categoriesGrid">
                        <div class="categories-scroll-wrapper flex gap-3 min-w-max">
                            <div class="text-center text-gray-500">ƒêang t·∫£i...</div>
                        </div>
                    </div>
                </div>

                <!-- Featured Products -->
                <div class="mb-12">
                    <h3 class="text-2xl font-bold text-gray-800 mb-6">S·∫£n ph·∫©m n·ªïi b·∫≠t</h3>
                    <div class="products-grid grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"
                        id="featuredProducts">
                        <div class="text-center text-gray-500">ƒêang t·∫£i...</div>
                    </div>
                </div>

                <!-- New Products -->
                <div class="mb-12">
                    <div class="flex items-center justify-between gap-4 mb-6">
                        <h3 class="text-2xl font-bold text-gray-800">S·∫£n ph·∫©m m·ªõi</h3>
                    </div>
                    <div class="products-grid grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"
                        id="newProductsGrid">
                        <div class="text-center text-gray-500">ƒêang t·∫£i...</div>
                    </div>
                    <div class="mt-6 flex justify-center">
                        <a href="/?page=products&mode=new"
                           class="px-6 py-3 bg-white border border-red-600 text-red-600 rounded-lg font-semibold hover:bg-red-50 transition-colors"
                           onclick="event.preventDefault(); navigateToNewProducts(); return false;">
                            Xem th√™m
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Products Page -->
        <section class="page hidden" id="pageProducts" data-page="products">
            <div class="container mx-auto px-4 py-8 space-y-6">
                <div class="flex flex-col gap-2" id="productsHeaderBox">
                    <p class="text-sm text-gray-500 uppercase tracking-wide">Danh s√°ch s·∫£n ph·∫©m</p>
                    <h2 class="text-3xl font-bold text-gray-800" id="productsHeading">S·∫£n ph·∫©m</h2>
                    <p class="text-gray-600" id="productsSubtitle">T·∫•t c·∫£ s·∫£n ph·∫©m ƒëang c√≥</p>
                    <div class="flex flex-wrap gap-2" id="activeFilters"></div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-[300px_1fr] gap-6">
                    <!-- Sidebar filter -->
                    <aside id="filtersSidebar" class="bg-white rounded-lg shadow-md p-5 h-fit space-y-5">
                        <div class="flex items-center justify-between">
                            <h3 class="text-lg font-semibold text-gray-800">B·ªô l·ªçc</h3>
                            <button id="resetFiltersBtn"
                                class="text-sm text-red-600 hover:text-red-700 font-semibold">X√≥a l·ªçc</button>
                        </div>

                        <div class="space-y-4">
                            <div class="space-y-2">
                                <label class="block text-sm text-gray-600">T√¨m ki·∫øm</label>
                                <input type="text" id="searchInput" placeholder="T·ª´ kh√≥a..."
                                    class="w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:border-red-500">
                            </div>

                            <div class="space-y-2">
                                <label class="block text-sm text-gray-600">Danh m·ª•c</label>
                                <select id="categoryFilter"
                                    class="w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:border-red-500">
                                    <option value="">T·∫•t c·∫£ danh m·ª•c</option>
                                </select>
                            </div>

                            <div class="grid grid-cols-2 gap-3">
                                <div>
                                    <label class="block text-sm text-gray-600">Gi√° t·ª´</label>
                                    <input type="number" id="minPrice" placeholder="0"
                                        class="w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:border-red-500">
                                </div>
                                <div>
                                    <label class="block text-sm text-gray-600">ƒë·∫øn</label>
                                    <input type="number" id="maxPrice" placeholder="Max"
                                        class="w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:border-red-500">
                                </div>
                            </div>

                            <div class="space-y-2">
                                <label class="block text-sm text-gray-600">S·∫Øp x·∫øp</label>
                                <select id="sortSelect"
                                    class="w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:border-red-500">
                                    <option value="id">M·∫∑c ƒë·ªãnh</option>
                                    <option value="id-desc">M·ªõi nh·∫•t</option>
                                    <option value="price-asc">Gi√°: Th·∫•p ‚Üí Cao</option>
                                    <option value="price-desc">Gi√°: Cao ‚Üí Th·∫•p</option>
                                    <option value="name-asc">T√™n: A ‚Üí Z</option>
                                </select>
                            </div>

                            <button id="applyFiltersBtn"
                                class="w-full bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors">√Åp d·ª•ng l·ªçc</button>
                        </div>
                    </aside>

                    <!-- Products list -->
                    <div class="space-y-4">
                        <div class="flex items-center justify-between gap-3 flex-wrap">
                            <div class="text-sm text-gray-600" id="productsCounter">ƒêang t·∫£i...</div>
                            <button id="newProductsBtn"
                                class="px-4 py-2 border border-red-600 text-red-600 rounded-lg font-semibold hover:bg-red-50 transition-colors"
                                onclick="navigateToNewProducts()"
                                type="button">
                                S·∫£n ph·∫©m m·ªõi
                            </button>
                        </div>

                        <div class="products-grid grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"
                            id="productsGrid">
                            <div class="text-center text-gray-500">ƒêang t·∫£i...</div>
                        </div>

                        <div class="pagination flex justify-center gap-2" id="pagination"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Categories Page -->
        <section class="page hidden" id="pageCategories" data-page="categories">
            <div class="container mx-auto px-4 py-8">
                <div class="mb-6">
                    <h2 class="text-3xl font-bold text-gray-800">Danh m·ª•c s·∫£n ph·∫©m</h2>
                </div>
                <div class="categories-list grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6" id="categoriesList">
                    <div class="text-center text-gray-500">ƒêang t·∫£i...</div>
                </div>
            </div>
        </section>

        <!-- Cart Page -->
        <section class="page hidden" id="pageCart" data-page="cart">
            <div class="container mx-auto px-4 py-8">
                <div class="mb-6">
                    <h2 class="text-3xl font-bold text-gray-800">Gi·ªè h√†ng c·ªßa t√¥i</h2>
                </div>
                <div id="cartContent">
                    <div class="text-center text-gray-500">ƒêang t·∫£i...</div>
                </div>
            </div>
        </section>

        <!-- Orders Page -->
        <section class="page hidden" id="pageOrders" data-page="orders">
            <div class="container mx-auto px-4 py-8">
                <div class="mb-6">
                    <h2 class="text-3xl font-bold text-gray-800">ƒê∆°n h√†ng c·ªßa t√¥i</h2>
                </div>
                <div id="ordersContent">
                    <div class="text-center text-gray-500">ƒêang t·∫£i...</div>
                </div>
                <div class="pagination flex justify-center gap-2 mt-6" id="ordersPagination"></div>
            </div>
        </section>

        <!-- Profile Page -->
        <section class="page hidden" id="pageProfile" data-page="profile">
            <div class="container mx-auto px-4 py-8">
                <div class="mb-6">
                    <h2 class="text-3xl font-bold text-gray-800">H·ªì s∆° c√° nh√¢n</h2>
                </div>
                <div class="profile-content max-w-2xl" id="profileContent">
                    <div class="text-center text-gray-500">ƒêang t·∫£i...</div>
                </div>
            </div>
        </section>
    </main>

    <!-- Floating Sidebar -->
    <div class="fixed right-4 bottom-4 z-40 flex flex-col gap-3">
        <button onclick="window.scrollTo({top: 0, behavior: 'smooth'})"
            class="bg-red-600 text-white p-3 rounded-full shadow-lg hover:bg-red-700 transition-colors">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18">
                </path>
            </svg>
        </button>
        <!-- Chatbot button moved to chatbot component - hidden this one -->
        <button type="button" id="mainChatbotBtn" class="bg-blue-600 text-white p-3 rounded-full shadow-lg hover:bg-blue-700 transition-colors hidden" style="display: none !important;">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z">
                </path>
            </svg>
        </button>
    </div>

    <!-- Modal: Login -->
    <div class="modal hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center"
        id="loginModal">
        <div class="modal-content bg-white rounded-lg p-6 max-w-md w-full mx-4">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-2xl font-bold text-gray-800">ƒêƒÉng nh·∫≠p</h2>
                <button id="loginModalClose" class="text-gray-500 hover:text-gray-700">&times;</button>
            </div>
            <form id="loginForm">
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">T√™n ƒëƒÉng nh·∫≠p</label>
                    <input type="text" id="loginUsername"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-red-500"
                        required>
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">M·∫≠t kh·∫©u</label>
                    <input type="password" id="loginPassword"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-red-500"
                        required>
                </div>
                <button type="submit"
                    class="w-full bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition-colors font-bold">ƒêƒÉng
                    nh·∫≠p</button>
            </form>
            <div class="modal-message mt-4 hidden" id="loginMessage"></div>
        </div>
    </div>

    <!-- Modal: Register -->
    <div class="modal hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center"
        id="registerModal">
        <div class="modal-content bg-white rounded-lg p-6 max-w-md w-full mx-4">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-2xl font-bold text-gray-800">ƒêƒÉng k√Ω</h2>
                <button id="registerModalClose" class="text-gray-500 hover:text-gray-700">&times;</button>
            </div>
            <form id="registerForm">
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">T√™n ƒëƒÉng nh·∫≠p</label>
                    <input type="text" id="registerUsername"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-red-500"
                        required>
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">M·∫≠t kh·∫©u</label>
                    <input type="password" id="registerPassword"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-red-500"
                        required minlength="6">
                </div>
                <button type="submit"
                    class="w-full bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition-colors font-bold">ƒêƒÉng
                    k√Ω</button>
            </form>
            <div class="modal-message mt-4 hidden" id="registerMessage"></div>
        </div>
    </div>

    <!-- Modal: Checkout -->
    <div class="modal hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center"
        id="checkoutModal">
        <div class="modal-content bg-white rounded-lg p-6 max-w-md w-full mx-4">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-2xl font-bold text-gray-800">ƒê·∫∑t h√†ng</h2>
                <button id="checkoutModalClose" class="text-gray-500 hover:text-gray-700">&times;</button>
            </div>
            <form id="checkoutForm">
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">ƒê·ªãa ch·ªâ giao h√†ng</label>
                    <textarea id="shippingAddress" rows="3"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-red-500"
                        required></textarea>
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">S·ªë ƒëi·ªán tho·∫°i</label>
                    <input type="tel" id="shippingPhone"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-red-500"
                        required>
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">T·ªïng ti·ªÅn</label>
                    <input type="text" id="orderTotal" readonly
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-100">
                </div>
                <button type="submit"
                    class="w-full bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition-colors font-bold">X√°c
                    nh·∫≠n ƒë·∫∑t h√†ng</button>
            </form>
            <div class="modal-message mt-4 hidden" id="checkoutMessage"></div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center"
        id="loadingOverlay">
        <div class="spinner border-4 border-gray-300 border-t-red-600 rounded-full w-12 h-12 animate-spin"></div>
    </div>

    <!-- Notification Toast -->
    <div class="toast fixed bottom-4 right-4 bg-white border border-gray-200 rounded-lg shadow-lg p-4 hidden z-50"
        id="toast"></div>

    <!-- Footer -->
    <footer class="bg-gray-900 text-gray-300 mt-12">
        <div class="container mx-auto px-4 py-12">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                <!-- About Section -->
                <div>
                    <div class="flex items-center gap-2 mb-4">
                        <img src="/img/logo/logo.png" alt="TechStore" class="w-10 h-10 object-contain" />
                        <span class="text-2xl font-bold text-white">TechStore</span>
                    </div>
                    <p class="text-sm mb-4 text-gray-400">
                        TechStore - N∆°i mua s·∫Øm c√¥ng ngh·ªá uy t√≠n, ch·∫•t l∆∞·ª£ng. Ch√∫ng t√¥i cam k·∫øt mang ƒë·∫øn nh·ªØng s·∫£n ph·∫©m c√¥ng ngh·ªá ch√≠nh h√£ng v·ªõi gi√° t·ªët nh·∫•t.
                    </p>
                    <div class="flex gap-4">
                        <a href="https://facebook.com" target="_blank" rel="noopener noreferrer" 
                           class="w-10 h-10 bg-gray-800 rounded-full flex items-center justify-center hover:bg-red-600 transition-colors">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="https://instagram.com" target="_blank" rel="noopener noreferrer"
                           class="w-10 h-10 bg-gray-800 rounded-full flex items-center justify-center hover:bg-red-600 transition-colors">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="https://youtube.com" target="_blank" rel="noopener noreferrer"
                           class="w-10 h-10 bg-gray-800 rounded-full flex items-center justify-center hover:bg-red-600 transition-colors">
                            <i class="fab fa-youtube"></i>
                        </a>
                        <a href="https://zalo.me" target="_blank" rel="noopener noreferrer"
                           class="w-10 h-10 bg-gray-800 rounded-full flex items-center justify-center hover:bg-red-600 transition-colors">
                            <i class="fab fa-zalo"></i>
                        </a>
                    </div>
                </div>

                <!-- Quick Links -->
                <div>
                    <h3 class="text-white font-bold text-lg mb-4">Li√™n k·∫øt nhanh</h3>
                    <ul class="space-y-2">
                        <li>
                            <a href="/" onclick="navigateTo('home'); return false;" 
                               class="text-gray-400 hover:text-red-500 transition-colors">Trang ch·ªß</a>
                        </li>
                        <li>
                            <a href="/" onclick="navigateTo('products'); return false;" 
                               class="text-gray-400 hover:text-red-500 transition-colors">S·∫£n ph·∫©m</a>
                        </li>
                        <li>
                            <a href="/" onclick="navigateTo('categories'); return false;" 
                               class="text-gray-400 hover:text-red-500 transition-colors">Danh m·ª•c</a>
                        </li>
                       
                        <li>
                            <a href="/" onclick="navigateTo('cart'); return false;" 
                               class="text-gray-400 hover:text-red-500 transition-colors">Gi·ªè h√†ng</a>
                        </li>
                    </ul>
                </div>

                <!-- Support -->
                <div>
                    <h3 class="text-white font-bold text-lg mb-4">H·ªó tr·ª£</h3>
                    <ul class="space-y-2">
                        <li>
                            <a href="#" class="text-gray-400 hover:text-red-500 transition-colors">V·ªÅ ch√∫ng t√¥i</a>
                        </li>
                        <li>
                            <a href="#" class="text-gray-400 hover:text-red-500 transition-colors">Ch√≠nh s√°ch b·∫£o h√†nh</a>
                        </li>
                        <li>
                            <a href="#" class="text-gray-400 hover:text-red-500 transition-colors">Ch√≠nh s√°ch ƒë·ªïi tr·∫£</a>
                        </li>
                        <li>
                            <a href="#" class="text-gray-400 hover:text-red-500 transition-colors">V·∫≠n chuy·ªÉn & Giao h√†ng</a>
                        </li>
                        <li>
                            <a href="#" class="text-gray-400 hover:text-red-500 transition-colors">C√¢u h·ªèi th∆∞·ªùng g·∫∑p</a>
                        </li>
                    </ul>
                </div>

                <!-- Contact Info -->
                <div>
                    <h3 class="text-white font-bold text-lg mb-4">Li√™n h·ªá</h3>
                    <ul class="space-y-3">
                        <li class="flex items-start gap-3">
                            <i class="fas fa-map-marker-alt text-red-500 mt-1"></i>
                            <span class="text-gray-400 text-sm">123 ƒê∆∞·ªùng ABC, Qu·∫≠n XYZ, TP.HCM, Vi·ªát Nam</span>
                        </li>
                        <li class="flex items-center gap-3">
                            <i class="fas fa-phone text-red-500"></i>
                            <a href="tel:1900123456" class="text-gray-400 hover:text-red-500 transition-colors text-sm">1900 123 456</a>
                        </li>
                        <li class="flex items-center gap-3">
                            <i class="fas fa-envelope text-red-500"></i>
                            <a href="mailto:support@techstore.vn" class="text-gray-400 hover:text-red-500 transition-colors text-sm">support@techstore.vn</a>
                        </li>
                        <li class="flex items-center gap-3">
                            <i class="fas fa-clock text-red-500"></i>
                            <span class="text-gray-400 text-sm">8:00 - 22:00 (T·∫•t c·∫£ c√°c ng√†y)</span>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Bottom Bar -->
            <div class="border-t border-gray-800 mt-8 pt-8">
                <div class="flex flex-col md:flex-row justify-between items-center gap-4">
                    <p class="text-gray-400 text-sm">
                        ¬© 2025 TechStore. T·∫•t c·∫£ quy·ªÅn ƒë∆∞·ª£c b·∫£o l∆∞u.
                    </p>
                    <div class="flex gap-6 text-sm">
                        <a href="#" class="text-gray-400 hover:text-red-500 transition-colors">Ch√≠nh s√°ch b·∫£o m·∫≠t</a>
                        <a href="#" class="text-gray-400 hover:text-red-500 transition-colors">ƒêi·ªÅu kho·∫£n s·ª≠ d·ª•ng</a>
                        <a href="#" class="text-gray-400 hover:text-red-500 transition-colors">S∆° ƒë·ªì trang web</a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script src="/app.js"></script>
    <script>
        // Ki·ªÉm tra ƒëƒÉng nh·∫≠p khi trang load
        document.addEventListener('DOMContentLoaded', () => {
            // Ki·ªÉm tra token t·ª´ URL (sau khi ƒëƒÉng nh·∫≠p OAuth)
            const urlParams = new URLSearchParams(window.location.search);
            const token = urlParams.get('token');
            if (token) {
                localStorage.setItem('token', token);
                // X√≥a token kh·ªèi URL
                window.history.replaceState({}, document.title, window.location.pathname);
            }

            // Ki·ªÉm tra ƒëƒÉng nh·∫≠p
            if (typeof checkAuth === 'function') {
                checkAuth();
            }

            // Slider functionality
            initSlider();
        });

        // Slider functionality
        function initSlider() {
            const slides = document.querySelectorAll('.slide');
            const dots = document.querySelectorAll('.slider-dot');
            const prevBtn = document.querySelector('.slider-prev');
            const nextBtn = document.querySelector('.slider-next');
            let currentSlide = 0;
            let slideInterval;

            // Show slide function
            function showSlide(index) {
                // Hide all slides
                slides.forEach(slide => {
                    slide.classList.remove('opacity-100');
                    slide.classList.add('opacity-0');
                });
                dots.forEach(dot => {
                    dot.classList.remove('active-dot', 'bg-opacity-100');
                    dot.classList.add('bg-opacity-50');
                });

                // Show current slide
                if (slides[index]) {
                    slides[index].classList.remove('opacity-0');
                    slides[index].classList.add('opacity-100');
                }
                if (dots[index]) {
                    dots[index].classList.remove('bg-opacity-50');
                    dots[index].classList.add('active-dot', 'bg-opacity-100');
                }

                currentSlide = index;
            }

            // Next slide
            function nextSlide() {
                const next = (currentSlide + 1) % slides.length;
                showSlide(next);
            }

            // Previous slide
            function prevSlide() {
                const prev = (currentSlide - 1 + slides.length) % slides.length;
                showSlide(prev);
            }

            // Auto-play slider
            function startAutoPlay() {
                slideInterval = setInterval(nextSlide, 5000); // Change slide every 5 seconds
            }

            function stopAutoPlay() {
                clearInterval(slideInterval);
            }

            // Event listeners
            if (nextBtn) {
                nextBtn.addEventListener('click', () => {
                    nextSlide();
                    stopAutoPlay();
                    startAutoPlay();
                });
            }

            if (prevBtn) {
                prevBtn.addEventListener('click', () => {
                    prevSlide();
                    stopAutoPlay();
                    startAutoPlay();
                });
            }

            // Dot indicators
            dots.forEach((dot, index) => {
                dot.addEventListener('click', () => {
                    showSlide(index);
                    stopAutoPlay();
                    startAutoPlay();
                });
            });

            // Pause on hover
            const sliderContainer = document.querySelector('.slider-container');
            if (sliderContainer) {
                sliderContainer.addEventListener('mouseenter', stopAutoPlay);
                sliderContainer.addEventListener('mouseleave', startAutoPlay);
            }

            // Initialize: show first slide
            showSlide(0);
            startAutoPlay();
        }
    </script>

    <!-- Simple Chatbot Widget -->
    <div id="chatbot-simple-container"></div>
    <script>
        // Load chatbot HTML component FIRST, then load script
        (async function() {
            try {
                const res = await fetch('/components/chatbot-simple.html');
                const html = await res.text();
                const container = document.getElementById('chatbot-simple-container');
                
                // Parse HTML to separate styles and HTML
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                
                // Add styles
                const styles = doc.querySelectorAll('style');
                styles.forEach(style => {
                    const newStyle = document.createElement('style');
                    newStyle.textContent = style.textContent;
                    document.head.appendChild(newStyle);
                });
                
                // Add HTML content (without scripts)
                const htmlContent = doc.querySelector('div.chatbot-widget-simple');
                if (htmlContent) {
                    // Remove script tags from HTML before inserting
                    const tempDiv = document.createElement('div');
                    tempDiv.innerHTML = htmlContent.outerHTML;
                    tempDiv.querySelectorAll('script').forEach(s => s.remove());
                    container.innerHTML = tempDiv.innerHTML;
                    console.log('Chatbot HTML loaded');
                    
                    // Load script AFTER HTML is inserted
                    const script = document.createElement('script');
                    script.src = '/components/chatbot-simple.js';
                    script.defer = true;
                    document.body.appendChild(script);
                }
            } catch (err) {
                console.error('Failed to load chatbot HTML:', err);
            }
        })();
    </script>

    <!-- Theme, i18n, and Animations -->
    <script src="/js/theme.js"></script>
    <script src="/js/i18n.js"></script>
    <script src="/js/animations.js"></script>

    <!-- Initialize Theme and Language Toggles -->
    <script>
        // Wait for scripts to load and initialize
        function initThemeAndLang() {
            // Initialize theme toggle
            const themeToggle = document.getElementById('themeToggle');
            if (themeToggle) {
                // Wait for themeManager to be available
                let attempts = 0;
                const maxAttempts = 20;
                const checkTheme = setInterval(() => {
                    attempts++;
                    if (window.themeManager || attempts >= maxAttempts) {
                        clearInterval(checkTheme);
                        if (window.themeManager) {
                            // Update icon based on current theme
                            const currentTheme = window.themeManager.get();
                            const icon = themeToggle.querySelector('i');
                            if (icon) {
                                icon.className = currentTheme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
                            }
                            
                            // Remove old listeners and add new one
                            const newToggle = themeToggle.cloneNode(true);
                            themeToggle.parentNode.replaceChild(newToggle, themeToggle);
                            
                            // Add click handler
                            newToggle.addEventListener('click', function(e) {
                                e.preventDefault();
                                e.stopPropagation();
                                if (window.themeManager) {
                                    const newTheme = window.themeManager.toggle();
                                    const icon = newToggle.querySelector('i');
                                    if (icon) {
                                        icon.className = newTheme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
                                    }
                                }
                            });
                        } else {
                            console.warn('ThemeManager not available');
                        }
                    }
                }, 100);
            }

            // Initialize language toggle
            const langToggle = document.getElementById('langToggle');
            if (langToggle) {
                // Wait for i18n to be available
                let attempts = 0;
                const maxAttempts = 20;
                const checkI18n = setInterval(() => {
                    attempts++;
                    if (window.i18n || attempts >= maxAttempts) {
                        clearInterval(checkI18n);
                        if (window.i18n) {
                            // Set current language
                            langToggle.value = window.i18n.getLanguage();
                            
                            // Remove old listeners and add new one
                            const newLangToggle = langToggle.cloneNode(true);
                            langToggle.parentNode.replaceChild(newLangToggle, langToggle);
                            
                            // Add change handler
                            newLangToggle.addEventListener('change', function(e) {
                                e.preventDefault();
                                e.stopPropagation();
                                if (window.i18n) {
                                    window.i18n.setLanguage(e.target.value);
                                }
                            });
                        } else {
                            console.warn('i18n not available');
                        }
                    }
                }, 100);
            }
        }

        // Run after page loads
        window.addEventListener('load', function() {
            setTimeout(initThemeAndLang, 200);
        });
    </script>

    <!-- Service Worker Registration (PWA) -->
    <script>
        if ('serviceWorker' in navigator) {
            // Unregister old service workers on page load (for development)
            navigator.serviceWorker.getRegistrations().then((registrations) => {
                for (let registration of registrations) {
                    registration.unregister().then(() => {
                        console.log('Old Service Worker unregistered');
                    });
                }
            });

            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then((registration) => {
                        console.log('Service Worker registered:', registration.scope);
                        // Force update on next page load
                        registration.update();
                    })
                    .catch((error) => {
                        console.log('Service Worker registration failed:', error);
                    });
            });
        }
    </script>
</body>

</html>